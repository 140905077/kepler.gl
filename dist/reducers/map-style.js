'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.INITIAL_MAP_STYLE = undefined;

var _defineProperty2 = require('babel-runtime/helpers/defineProperty');

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _handleActions;

// Actions


// Constants


var _reduxActions = require('redux-actions');

var _actionTypes = require('../constants/action-types');

var _actionTypes2 = _interopRequireDefault(_actionTypes);

var _mapStyleUpdaters = require('./map-style-updaters');

var _colorUtils = require('../utils/color-utils');

var _defaultSettings = require('../constants/default-settings');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// bedrock browserInit flattens our immutable object into a plain object
// we have to recreate the state after the app is loaded
var getDefaultState = function getDefaultState() {
  var visibleLayerGroups = {};
  var styleType = _defaultSettings.INITIAL_STYLE_TYPE;
  var topLayerGroups = {};

  return {
    styleType: styleType,
    visibleLayerGroups: visibleLayerGroups,
    topLayerGroups: topLayerGroups,
    mapStyles: {},
    buildingLayer: {
      isVisible: false,
      color: (0, _colorUtils.hexToRgb)(_defaultSettings.DEFAULT_BLDG_COLOR),
      opacity: 0.7
    }
  };
};

var INITIAL_MAP_STYLE = exports.INITIAL_MAP_STYLE = getDefaultState();

var mapStyleReducer = (0, _reduxActions.handleActions)((_handleActions = {}, (0, _defineProperty3.default)(_handleActions, _actionTypes2.default.MAP_CONFIG_CHANGE, _mapStyleUpdaters.mapConfigChangeUpdater), (0, _defineProperty3.default)(_handleActions, _actionTypes2.default.MAP_STYLE_CHANGE, _mapStyleUpdaters.mapStyleChangeUpdater), (0, _defineProperty3.default)(_handleActions, _actionTypes2.default.MAP_BUILDING_CHANGE, _mapStyleUpdaters.mapBuildingChangeUpdater), (0, _defineProperty3.default)(_handleActions, _actionTypes2.default.LOAD_MAP_STYLES, _mapStyleUpdaters.loadMapStylesUpdater), (0, _defineProperty3.default)(_handleActions, _actionTypes2.default.LOAD_MAP_STYLE_ERR, _mapStyleUpdaters.loadMapStyleErrUpdater), (0, _defineProperty3.default)(_handleActions, _actionTypes2.default.RECEIVE_MAP_CONFIG, _mapStyleUpdaters.receiveMapConfigUpdater), _handleActions), INITIAL_MAP_STYLE);

exports.default = mapStyleReducer;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9yZWR1Y2Vycy9tYXAtc3R5bGUuanMiXSwibmFtZXMiOlsiZ2V0RGVmYXVsdFN0YXRlIiwidmlzaWJsZUxheWVyR3JvdXBzIiwic3R5bGVUeXBlIiwidG9wTGF5ZXJHcm91cHMiLCJtYXBTdHlsZXMiLCJidWlsZGluZ0xheWVyIiwiaXNWaXNpYmxlIiwiY29sb3IiLCJvcGFjaXR5IiwiSU5JVElBTF9NQVBfU1RZTEUiLCJtYXBTdHlsZVJlZHVjZXIiLCJNQVBfQ09ORklHX0NIQU5HRSIsIk1BUF9TVFlMRV9DSEFOR0UiLCJNQVBfQlVJTERJTkdfQ0hBTkdFIiwiTE9BRF9NQVBfU1RZTEVTIiwiTE9BRF9NQVBfU1RZTEVfRVJSIiwiUkVDRUlWRV9NQVBfQ09ORklHIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBRUE7OztBQWFBOzs7QUFmQTs7QUFHQTs7OztBQUVBOztBQVFBOztBQUdBOzs7O0FBS0E7QUFDQTtBQUNBLElBQU1BLGtCQUFrQixTQUFsQkEsZUFBa0IsR0FBTTtBQUM1QixNQUFNQyxxQkFBcUIsRUFBM0I7QUFDQSxNQUFNQywrQ0FBTjtBQUNBLE1BQU1DLGlCQUFpQixFQUF2Qjs7QUFFQSxTQUFPO0FBQ0xELHdCQURLO0FBRUxELDBDQUZLO0FBR0xFLGtDQUhLO0FBSUxDLGVBQVcsRUFKTjtBQUtMQyxtQkFBZTtBQUNiQyxpQkFBVyxLQURFO0FBRWJDLGFBQU8sOERBRk07QUFHYkMsZUFBUztBQUhJO0FBTFYsR0FBUDtBQVdELENBaEJEOztBQWtCTyxJQUFNQyxnREFBb0JULGlCQUExQjs7QUFFUCxJQUFNVSxrQkFBa0IscUdBRW5CLHNCQUFZQyxpQkFGTywyRkFHbkIsc0JBQVlDLGdCQUhPLDBGQUluQixzQkFBWUMsbUJBSk8sNkZBS25CLHNCQUFZQyxlQUxPLHlGQU1uQixzQkFBWUMsa0JBTk8sMkZBT25CLHNCQUFZQyxrQkFQTywrREFTdEJQLGlCQVRzQixDQUF4Qjs7a0JBWWVDLGUiLCJmaWxlIjoibWFwLXN0eWxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtoYW5kbGVBY3Rpb25zfSBmcm9tICdyZWR1eC1hY3Rpb25zJztcblxuLy8gQWN0aW9uc1xuaW1wb3J0IEFjdGlvblR5cGVzIGZyb20gJ2NvbnN0YW50cy9hY3Rpb24tdHlwZXMnO1xuXG5pbXBvcnQge1xuICBtYXBDb25maWdDaGFuZ2VVcGRhdGVyLFxuICBtYXBTdHlsZUNoYW5nZVVwZGF0ZXIsXG4gIG1hcEJ1aWxkaW5nQ2hhbmdlVXBkYXRlcixcbiAgbG9hZE1hcFN0eWxlc1VwZGF0ZXIsXG4gIGxvYWRNYXBTdHlsZUVyclVwZGF0ZXIsXG4gIHJlY2VpdmVNYXBDb25maWdVcGRhdGVyXG59IGZyb20gJy4vbWFwLXN0eWxlLXVwZGF0ZXJzJztcbmltcG9ydCB7aGV4VG9SZ2J9IGZyb20gJ3V0aWxzL2NvbG9yLXV0aWxzJztcblxuLy8gQ29uc3RhbnRzXG5pbXBvcnQge1xuICBJTklUSUFMX1NUWUxFX1RZUEUsXG4gIERFRkFVTFRfQkxER19DT0xPUlxufSBmcm9tICdjb25zdGFudHMvZGVmYXVsdC1zZXR0aW5ncyc7XG5cbi8vIGJlZHJvY2sgYnJvd3NlckluaXQgZmxhdHRlbnMgb3VyIGltbXV0YWJsZSBvYmplY3QgaW50byBhIHBsYWluIG9iamVjdFxuLy8gd2UgaGF2ZSB0byByZWNyZWF0ZSB0aGUgc3RhdGUgYWZ0ZXIgdGhlIGFwcCBpcyBsb2FkZWRcbmNvbnN0IGdldERlZmF1bHRTdGF0ZSA9ICgpID0+IHtcbiAgY29uc3QgdmlzaWJsZUxheWVyR3JvdXBzID0ge307XG4gIGNvbnN0IHN0eWxlVHlwZSA9IElOSVRJQUxfU1RZTEVfVFlQRTtcbiAgY29uc3QgdG9wTGF5ZXJHcm91cHMgPSB7fTtcblxuICByZXR1cm4ge1xuICAgIHN0eWxlVHlwZSxcbiAgICB2aXNpYmxlTGF5ZXJHcm91cHMsXG4gICAgdG9wTGF5ZXJHcm91cHMsXG4gICAgbWFwU3R5bGVzOiB7fSxcbiAgICBidWlsZGluZ0xheWVyOiB7XG4gICAgICBpc1Zpc2libGU6IGZhbHNlLFxuICAgICAgY29sb3I6IGhleFRvUmdiKERFRkFVTFRfQkxER19DT0xPUiksXG4gICAgICBvcGFjaXR5OiAwLjdcbiAgICB9XG4gIH07XG59O1xuXG5leHBvcnQgY29uc3QgSU5JVElBTF9NQVBfU1RZTEUgPSBnZXREZWZhdWx0U3RhdGUoKTtcblxuY29uc3QgbWFwU3R5bGVSZWR1Y2VyID0gaGFuZGxlQWN0aW9ucyhcbiAge1xuICAgIFtBY3Rpb25UeXBlcy5NQVBfQ09ORklHX0NIQU5HRV06IG1hcENvbmZpZ0NoYW5nZVVwZGF0ZXIsXG4gICAgW0FjdGlvblR5cGVzLk1BUF9TVFlMRV9DSEFOR0VdOiBtYXBTdHlsZUNoYW5nZVVwZGF0ZXIsXG4gICAgW0FjdGlvblR5cGVzLk1BUF9CVUlMRElOR19DSEFOR0VdOiBtYXBCdWlsZGluZ0NoYW5nZVVwZGF0ZXIsXG4gICAgW0FjdGlvblR5cGVzLkxPQURfTUFQX1NUWUxFU106IGxvYWRNYXBTdHlsZXNVcGRhdGVyLFxuICAgIFtBY3Rpb25UeXBlcy5MT0FEX01BUF9TVFlMRV9FUlJdOiBsb2FkTWFwU3R5bGVFcnJVcGRhdGVyLFxuICAgIFtBY3Rpb25UeXBlcy5SRUNFSVZFX01BUF9DT05GSUddOiByZWNlaXZlTWFwQ29uZmlnVXBkYXRlclxuICB9LFxuICBJTklUSUFMX01BUF9TVFlMRVxuKTtcblxuZXhwb3J0IGRlZmF1bHQgbWFwU3R5bGVSZWR1Y2VyO1xuIl19