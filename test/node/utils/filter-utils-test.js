import test from 'tape';
import moment from 'moment';
import testData, {testFields} from '../../../../../test/fixtures/test-csv-data';

import {
  FILTER_TYPES,
  adjustValueToFilterDomain,
  isDataMatchFilter,
  getFieldDomain,
  getTimestampFieldDomain,
  getDefaultfilter
} from '../../../src/utils/filter-utils';

import {processCsvData} from '../../../../utils/data-utils';

/* eslint-disable max-statements */
test('filterUtils -> adjustValueToFilterDomain', t => {
  // TODO: needs id
  const rangeFilter = getDefaultfilter();
  rangeFilter.type = FILTER_TYPES.range;
  rangeFilter.domain = [0, 1];

  t.deepEqual(
    adjustValueToFilterDomain([0, 0.5], rangeFilter),
    [0, 0.5],
    'should return value matched to range filter'
  );

  t.deepEqual(
    adjustValueToFilterDomain([-1, 0.5], rangeFilter),
    [0, 0.5],
    'should return value adjust to range filter'
  );

  t.deepEqual(
    adjustValueToFilterDomain([0.1, 1.5], rangeFilter),
    [0.1, 1],
    'should return value adjust to range filter'
  );

  t.deepEqual(
    adjustValueToFilterDomain([1.1, 2], rangeFilter),
    [0, 1],
    'should return value adjust to range filter'
  );

  t.deepEqual(
    adjustValueToFilterDomain(null, rangeFilter),
    [0, 1],
    'should return value adjust to range filter'
  );

  t.deepEqual(
    adjustValueToFilterDomain([undefined, 0.5], rangeFilter),
    [0, 0.5],
    'should return value adjust to range filter'
  );

  // TODO needs id
  const multiSelectFilter = getDefaultfilter();
  multiSelectFilter.type = FILTER_TYPES.multiSelect;
  multiSelectFilter.domain = ['a', 'b', 'c'];

  t.deepEqual(
    adjustValueToFilterDomain(['a', 'b'], multiSelectFilter),
    ['a', 'b'],
    'should return value matched to multiSelect filter'
  );

  t.deepEqual(
    adjustValueToFilterDomain(['a', 'b', 'd'], multiSelectFilter),
    ['a', 'b'],
    'should return value matched to multiSelect filter'
  );

  t.deepEqual(
    adjustValueToFilterDomain(['a', 'b', null], multiSelectFilter),
    ['a', 'b'],
    'should return value matched to multiSelect filter'
  );

  t.deepEqual(
    adjustValueToFilterDomain(null, multiSelectFilter),
    [],
    'should return [] if nothing matched to multiSelect filter'
  );

  t.deepEqual(
    adjustValueToFilterDomain([1, 2], multiSelectFilter),
    [],
    'should return [] if nothing matched to multiSelect filter'
  );

  // TODO needs id
  const selectFilter = getDefaultfilter();
  selectFilter.type = FILTER_TYPES.select;
  selectFilter.domain = ['a', 'b', 'c'];

  t.equal(
    adjustValueToFilterDomain('a', selectFilter),
    'a',
    'should return value matched to select filter'
  );

  t.equal(
    adjustValueToFilterDomain(['a', 'b'], selectFilter),
    true,
    'should return true if nothing matched to select filter'
  );

  t.equal(
    adjustValueToFilterDomain(null, selectFilter),
    true,
    'should return true if nothing matched to select filter'
  );

  t.end();
});

test('filterUtils -> getFieldDomain.time', async t => {
  const data = testData;
  const expectedFields = testFields;

  const {fields, rows} = await processCsvData(data);

  t.deepEqual(fields, expectedFields, 'should get corrent field type');
  testGetTimeFieldDomain(rows, fields, t);
  testIsTimeDataMatchFilter(rows, t);

  t.end();
});

function testGetTimeFieldDomain(rows, allFields, t) {
  const test_cases = [
    {
      name: 'default',
      input: getFieldDomain(rows, allFields[0]).domain,
      output: [
        moment.utc('2016-09-17 00:09:55').valueOf(),
        moment.utc('2016-09-17 00:30:08').valueOf()
      ],
      msg: '2016-09-17 00:30:08'
    },
    {
      name: 'epoch',
      input: getFieldDomain(rows, allFields[4]).domain,
      output: [
        moment.utc(1472688000000).valueOf(),
        moment.utc(1472774400000).valueOf()
      ],
      msg: 1472688000000
    },
    {
      name: 'T',
      input: getFieldDomain(rows, allFields[7]).domain,
      output: [
        moment.utc('2016-09-23T00:00:00.000Z').valueOf(),
        moment.utc('2016-09-23T08:00:00.000Z').valueOf()
      ],
      msg: '2016-09-23T00:00:00.000Z'
    },
    {
      name: 'UTC',
      input: getFieldDomain(rows, allFields[8]).domain,
      output: [
        moment.utc('2016-10-01 09:41:39+00:00').valueOf(),
        moment.utc('2016-10-01 10:01:54+00:00').valueOf()
      ],
      msg: '2016-10-01 09:41:39+00:00'
    },
    {
      name: 'local',
      input: getFieldDomain(rows, allFields[9]).domain,
      output: [
        moment.utc('2016-10-01 09:41:39+00:00').valueOf(),
        moment.utc('2016-10-01 17:01:54+00:00').valueOf()
      ],
      msg: '2016-10-01 09:41:39+00:00'
    }
  ];

  test_cases.forEach(tc =>
    t.deepEqual(
      tc.input,
      tc.output,
      `should process correct domian for timestamp ${tc.msg}`
    )
  );
}

function testIsTimeDataMatchFilter(rows, t) {
  const timeStringFilter = {
    fieldIdx: 0,
    type: FILTER_TYPES.timeRange,
    value: [
      moment.utc('2016-09-17 00:09:55').valueOf(),
      moment.utc('2016-09-17 00:20:08').valueOf()
    ]
  };

  t.equal(
    isDataMatchFilter(rows[10], timeStringFilter),
    true,
    `${rows[10][0]} should be inside the range`
  );

  t.equal(
    isDataMatchFilter(rows[15], timeStringFilter),
    false,
    `${rows[15][0]} should be outside the range`
  );

  const epochFilter = {
    fieldIdx: 4,
    type: FILTER_TYPES.timeRange,
    value: [
      moment.utc(1472688000000).valueOf(),
      moment.utc(1472734400000).valueOf()
    ]
  };

  t.equal(
    isDataMatchFilter(rows[10], epochFilter),
    true,
    `${rows[10][1]} should be inside the range`
  );

  t.equal(
    isDataMatchFilter(rows[15], epochFilter),
    false,
    `${rows[15][1]} should be outside the range`
  );

  const tzFilter = {
    fieldIdx: 7,
    type: FILTER_TYPES.timeRange,
    value: [
      moment.utc('2016-09-23T00:00:00.000Z').valueOf(),
      moment.utc('2016-09-23T06:00:00.000Z').valueOf()
    ]
  };

  t.equal(
    isDataMatchFilter(rows[10], tzFilter),
    true,
    `${rows[10][7]} should be inside the range`
  );

  t.equal(
    isDataMatchFilter(rows[23], tzFilter),
    false,
    `${rows[23][7]} should be outside the range`
  );

  const utcFilter = {
    fieldIdx: 8,
    type: FILTER_TYPES.timeRange,
    value: [
      moment.utc('2016-10-01 09:45:39+00:00').valueOf(),
      moment.utc('2016-10-01 10:00:00+00:00').valueOf()
    ]
  };

  t.equal(
    isDataMatchFilter(rows[6], utcFilter),
    false,
    `${rows[0][8]} should be outside the range`
  );

  t.equal(
    isDataMatchFilter(rows[4], utcFilter),
    true,
    `${rows[4][8]} should be inside the range`
  );

  t.equal(
    isDataMatchFilter(rows[23], utcFilter),
    false,
    `${rows[23][8]} should be outside the range`
  );
}

test('filterUtils -> getTimestampFieldDomain', t => {
  /* eslint-disable func-style */
  const valueAccessor = d => moment.utc(d).valueOf();
  /* eslint-enable func-style */

  const timeData = {
    no: {
      input: 0.5,
      expect: {
        domain: [0, 1],
        step: 0.05,
        histogram: [
          {count: 0, x0: 0, x1: 0.02},
          {count: 0, x0: 0.02, x1: 0.04},
          {count: 0, x0: 0.04, x1: 0.06},
          {count: 0, x0: 0.06, x1: 0.08},
          {count: 0, x0: 0.08, x1: 0.1},
          {count: 0, x0: 0.1, x1: 0.12},
          {count: 0, x0: 0.12, x1: 0.14},
          {count: 0, x0: 0.14, x1: 0.16},
          {count: 0, x0: 0.16, x1: 0.18},
          {count: 0, x0: 0.18, x1: 0.2},
          {count: 0, x0: 0.2, x1: 0.22},
          {count: 0, x0: 0.22, x1: 0.24},
          {count: 0, x0: 0.24, x1: 0.26},
          {count: 0, x0: 0.26, x1: 0.28},
          {count: 0, x0: 0.28, x1: 0.3},
          {count: 0, x0: 0.3, x1: 0.32},
          {count: 0, x0: 0.32, x1: 0.34},
          {count: 0, x0: 0.34, x1: 0.36},
          {count: 0, x0: 0.36, x1: 0.38},
          {count: 0, x0: 0.38, x1: 0.4},
          {count: 0, x0: 0.4, x1: 0.42},
          {count: 0, x0: 0.42, x1: 0.44},
          {count: 0, x0: 0.44, x1: 0.46},
          {count: 0, x0: 0.46, x1: 0.48},
          {count: 0, x0: 0.48, x1: 0.5},
          {count: 0, x0: 0.5, x1: 0.52},
          {count: 0, x0: 0.52, x1: 0.54},
          {count: 0, x0: 0.54, x1: 0.56},
          {count: 0, x0: 0.56, x1: 0.58},
          {count: 0, x0: 0.58, x1: 0.6},
          {count: 0, x0: 0.6, x1: 0.62},
          {count: 0, x0: 0.62, x1: 0.64},
          {count: 0, x0: 0.64, x1: 0.66},
          {count: 0, x0: 0.66, x1: 0.68},
          {count: 0, x0: 0.68, x1: 0.7},
          {count: 0, x0: 0.7, x1: 0.72},
          {count: 0, x0: 0.72, x1: 0.74},
          {count: 0, x0: 0.74, x1: 0.76},
          {count: 0, x0: 0.76, x1: 0.78},
          {count: 0, x0: 0.78, x1: 0.8},
          {count: 0, x0: 0.8, x1: 0.82},
          {count: 0, x0: 0.82, x1: 0.84},
          {count: 0, x0: 0.84, x1: 0.86},
          {count: 0, x0: 0.86, x1: 0.88},
          {count: 0, x0: 0.88, x1: 0.9},
          {count: 0, x0: 0.9, x1: 0.92},
          {count: 0, x0: 0.92, x1: 0.94},
          {count: 0, x0: 0.94, x1: 0.96},
          {count: 0, x0: 0.96, x1: 0.98},
          {count: 0, x0: 0.98, x1: 1},
          {count: 0, x0: 1, x1: 1}
        ],
        enlargedHistogram: [
          {count: 0, x0: 0, x1: 0.01},
          {count: 0, x0: 0.01, x1: 0.02},
          {count: 0, x0: 0.02, x1: 0.03},
          {count: 0, x0: 0.03, x1: 0.04},
          {count: 0, x0: 0.04, x1: 0.05},
          {count: 0, x0: 0.05, x1: 0.06},
          {count: 0, x0: 0.06, x1: 0.07},
          {count: 0, x0: 0.07, x1: 0.08},
          {count: 0, x0: 0.08, x1: 0.09},
          {count: 0, x0: 0.09, x1: 0.1},
          {count: 0, x0: 0.1, x1: 0.11},
          {count: 0, x0: 0.11, x1: 0.12},
          {count: 0, x0: 0.12, x1: 0.13},
          {count: 0, x0: 0.13, x1: 0.14},
          {count: 0, x0: 0.14, x1: 0.15},
          {count: 0, x0: 0.15, x1: 0.16},
          {count: 0, x0: 0.16, x1: 0.17},
          {count: 0, x0: 0.17, x1: 0.18},
          {count: 0, x0: 0.18, x1: 0.19},
          {count: 0, x0: 0.19, x1: 0.2},
          {count: 0, x0: 0.2, x1: 0.21},
          {count: 0, x0: 0.21, x1: 0.22},
          {count: 0, x0: 0.22, x1: 0.23},
          {count: 0, x0: 0.23, x1: 0.24},
          {count: 0, x0: 0.24, x1: 0.25},
          {count: 0, x0: 0.25, x1: 0.26},
          {count: 0, x0: 0.26, x1: 0.27},
          {count: 0, x0: 0.27, x1: 0.28},
          {count: 0, x0: 0.28, x1: 0.29},
          {count: 0, x0: 0.29, x1: 0.3},
          {count: 0, x0: 0.3, x1: 0.31},
          {count: 0, x0: 0.31, x1: 0.32},
          {count: 0, x0: 0.32, x1: 0.33},
          {count: 0, x0: 0.33, x1: 0.34},
          {count: 0, x0: 0.34, x1: 0.35},
          {count: 0, x0: 0.35, x1: 0.36},
          {count: 0, x0: 0.36, x1: 0.37},
          {count: 0, x0: 0.37, x1: 0.38},
          {count: 0, x0: 0.38, x1: 0.39},
          {count: 0, x0: 0.39, x1: 0.4},
          {count: 0, x0: 0.4, x1: 0.41},
          {count: 0, x0: 0.41, x1: 0.42},
          {count: 0, x0: 0.42, x1: 0.43},
          {count: 0, x0: 0.43, x1: 0.44},
          {count: 0, x0: 0.44, x1: 0.45},
          {count: 0, x0: 0.45, x1: 0.46},
          {count: 0, x0: 0.46, x1: 0.47},
          {count: 0, x0: 0.47, x1: 0.48},
          {count: 0, x0: 0.48, x1: 0.49},
          {count: 0, x0: 0.49, x1: 0.5},
          {count: 0, x0: 0.5, x1: 0.51},
          {count: 0, x0: 0.51, x1: 0.52},
          {count: 0, x0: 0.52, x1: 0.53},
          {count: 0, x0: 0.53, x1: 0.54},
          {count: 0, x0: 0.54, x1: 0.55},
          {count: 0, x0: 0.55, x1: 0.56},
          {count: 0, x0: 0.56, x1: 0.57},
          {count: 0, x0: 0.57, x1: 0.58},
          {count: 0, x0: 0.58, x1: 0.59},
          {count: 0, x0: 0.59, x1: 0.6},
          {count: 0, x0: 0.6, x1: 0.61},
          {count: 0, x0: 0.61, x1: 0.62},
          {count: 0, x0: 0.62, x1: 0.63},
          {count: 0, x0: 0.63, x1: 0.64},
          {count: 0, x0: 0.64, x1: 0.65},
          {count: 0, x0: 0.65, x1: 0.66},
          {count: 0, x0: 0.66, x1: 0.67},
          {count: 0, x0: 0.67, x1: 0.68},
          {count: 0, x0: 0.68, x1: 0.69},
          {count: 0, x0: 0.69, x1: 0.7},
          {count: 0, x0: 0.7, x1: 0.71},
          {count: 0, x0: 0.71, x1: 0.72},
          {count: 0, x0: 0.72, x1: 0.73},
          {count: 0, x0: 0.73, x1: 0.74},
          {count: 0, x0: 0.74, x1: 0.75},
          {count: 0, x0: 0.75, x1: 0.76},
          {count: 0, x0: 0.76, x1: 0.77},
          {count: 0, x0: 0.77, x1: 0.78},
          {count: 0, x0: 0.78, x1: 0.79},
          {count: 0, x0: 0.79, x1: 0.8},
          {count: 0, x0: 0.8, x1: 0.81},
          {count: 0, x0: 0.81, x1: 0.82},
          {count: 0, x0: 0.82, x1: 0.83},
          {count: 0, x0: 0.83, x1: 0.84},
          {count: 0, x0: 0.84, x1: 0.85},
          {count: 0, x0: 0.85, x1: 0.86},
          {count: 0, x0: 0.86, x1: 0.87},
          {count: 0, x0: 0.87, x1: 0.88},
          {count: 0, x0: 0.88, x1: 0.89},
          {count: 0, x0: 0.89, x1: 0.9},
          {count: 0, x0: 0.9, x1: 0.91},
          {count: 0, x0: 0.91, x1: 0.92},
          {count: 0, x0: 0.92, x1: 0.93},
          {count: 0, x0: 0.93, x1: 0.94},
          {count: 0, x0: 0.94, x1: 0.95},
          {count: 0, x0: 0.95, x1: 0.96},
          {count: 0, x0: 0.96, x1: 0.97},
          {count: 0, x0: 0.97, x1: 0.98},
          {count: 0, x0: 0.98, x1: 0.99},
          {count: 0, x0: 0.99, x1: 1},
          {count: 0, x0: 1, x1: 1}
        ],
        mappedValue: []
      }
    },
    zero: {
      input: ['2016-10-01 09:45:39', '2016-10-01 09:45:39'],
      expect: {
        domain: [1475315139000, 1475315139000],
        mappedValue: [1475315139000, 1475315139000],
        histogram: [{count: 2, x0: 1475315139000, x1: 1475315139000}],
        enlargedHistogram: [{count: 2, x0: 1475315139000, x1: 1475315139000}],
        step: 0.05
      }
    },
    tiny: {
      input: [
        '2016-10-01 09:45:39.001',
        '2016-10-01 09:45:39.002',
        '2016-10-01 09:45:39.003'
      ],
      expect: {
        domain: [1475315139001, 1475315139003],
        mappedValue: [1475315139001, 1475315139002, 1475315139003],
        histogram: [
          {count: 1, x0: 1475315139001, x1: 1475315139001.05},
          {count: 0, x0: 1475315139001.05, x1: 1475315139001.1},
          {count: 0, x0: 1475315139001.1, x1: 1475315139001.15},
          {count: 0, x0: 1475315139001.15, x1: 1475315139001.2},
          {count: 0, x0: 1475315139001.2, x1: 1475315139001.25},
          {count: 0, x0: 1475315139001.25, x1: 1475315139001.3},
          {count: 0, x0: 1475315139001.3, x1: 1475315139001.35},
          {count: 0, x0: 1475315139001.35, x1: 1475315139001.4},
          {count: 0, x0: 1475315139001.4, x1: 1475315139001.45},
          {count: 0, x0: 1475315139001.45, x1: 1475315139001.5},
          {count: 0, x0: 1475315139001.5, x1: 1475315139001.55},
          {count: 0, x0: 1475315139001.55, x1: 1475315139001.6},
          {count: 0, x0: 1475315139001.6, x1: 1475315139001.65},
          {count: 0, x0: 1475315139001.65, x1: 1475315139001.7},
          {count: 0, x0: 1475315139001.7, x1: 1475315139001.75},
          {count: 0, x0: 1475315139001.75, x1: 1475315139001.8},
          {count: 0, x0: 1475315139001.8, x1: 1475315139001.85},
          {count: 0, x0: 1475315139001.85, x1: 1475315139001.9},
          {count: 0, x0: 1475315139001.9, x1: 1475315139001.95},
          {count: 0, x0: 1475315139001.95, x1: 1475315139002},
          {count: 1, x0: 1475315139002, x1: 1475315139002.05},
          {count: 0, x0: 1475315139002.05, x1: 1475315139002.1},
          {count: 0, x0: 1475315139002.1, x1: 1475315139002.15},
          {count: 0, x0: 1475315139002.15, x1: 1475315139002.2},
          {count: 0, x0: 1475315139002.2, x1: 1475315139002.25},
          {count: 0, x0: 1475315139002.25, x1: 1475315139002.3},
          {count: 0, x0: 1475315139002.3, x1: 1475315139002.35},
          {count: 0, x0: 1475315139002.35, x1: 1475315139002.4},
          {count: 0, x0: 1475315139002.4, x1: 1475315139002.45},
          {count: 0, x0: 1475315139002.45, x1: 1475315139002.5},
          {count: 0, x0: 1475315139002.5, x1: 1475315139002.55},
          {count: 0, x0: 1475315139002.55, x1: 1475315139002.6},
          {count: 0, x0: 1475315139002.6, x1: 1475315139002.65},
          {count: 0, x0: 1475315139002.65, x1: 1475315139002.7},
          {count: 0, x0: 1475315139002.7, x1: 1475315139002.75},
          {count: 0, x0: 1475315139002.75, x1: 1475315139002.8},
          {count: 0, x0: 1475315139002.8, x1: 1475315139002.85},
          {count: 0, x0: 1475315139002.85, x1: 1475315139002.9},
          {count: 0, x0: 1475315139002.9, x1: 1475315139002.95},
          {count: 0, x0: 1475315139002.95, x1: 1475315139003},
          {count: 1, x0: 1475315139003, x1: 1475315139003}
        ],
        enlargedHistogram: [
          {count: 1, x0: 1475315139001, x1: 1475315139001.02},
          {count: 0, x0: 1475315139001.02, x1: 1475315139001.04},
          {count: 0, x0: 1475315139001.04, x1: 1475315139001.06},
          {count: 0, x0: 1475315139001.06, x1: 1475315139001.08},
          {count: 0, x0: 1475315139001.08, x1: 1475315139001.1},
          {count: 0, x0: 1475315139001.1, x1: 1475315139001.12},
          {count: 0, x0: 1475315139001.12, x1: 1475315139001.14},
          {count: 0, x0: 1475315139001.14, x1: 1475315139001.16},
          {count: 0, x0: 1475315139001.16, x1: 1475315139001.18},
          {count: 0, x0: 1475315139001.18, x1: 1475315139001.2},
          {count: 0, x0: 1475315139001.2, x1: 1475315139001.22},
          {count: 0, x0: 1475315139001.22, x1: 1475315139001.24},
          {count: 0, x0: 1475315139001.24, x1: 1475315139001.26},
          {count: 0, x0: 1475315139001.26, x1: 1475315139001.28},
          {count: 0, x0: 1475315139001.28, x1: 1475315139001.3},
          {count: 0, x0: 1475315139001.3, x1: 1475315139001.32},
          {count: 0, x0: 1475315139001.32, x1: 1475315139001.34},
          {count: 0, x0: 1475315139001.34, x1: 1475315139001.36},
          {count: 0, x0: 1475315139001.36, x1: 1475315139001.38},
          {count: 0, x0: 1475315139001.38, x1: 1475315139001.4},
          {count: 0, x0: 1475315139001.4, x1: 1475315139001.42},
          {count: 0, x0: 1475315139001.42, x1: 1475315139001.44},
          {count: 0, x0: 1475315139001.44, x1: 1475315139001.46},
          {count: 0, x0: 1475315139001.46, x1: 1475315139001.48},
          {count: 0, x0: 1475315139001.48, x1: 1475315139001.5},
          {count: 0, x0: 1475315139001.5, x1: 1475315139001.52},
          {count: 0, x0: 1475315139001.52, x1: 1475315139001.54},
          {count: 0, x0: 1475315139001.54, x1: 1475315139001.56},
          {count: 0, x0: 1475315139001.56, x1: 1475315139001.58},
          {count: 0, x0: 1475315139001.58, x1: 1475315139001.6},
          {count: 0, x0: 1475315139001.6, x1: 1475315139001.62},
          {count: 0, x0: 1475315139001.62, x1: 1475315139001.64},
          {count: 0, x0: 1475315139001.64, x1: 1475315139001.66},
          {count: 0, x0: 1475315139001.66, x1: 1475315139001.68},
          {count: 0, x0: 1475315139001.68, x1: 1475315139001.7},
          {count: 0, x0: 1475315139001.7, x1: 1475315139001.72},
          {count: 0, x0: 1475315139001.72, x1: 1475315139001.74},
          {count: 0, x0: 1475315139001.74, x1: 1475315139001.76},
          {count: 0, x0: 1475315139001.76, x1: 1475315139001.78},
          {count: 0, x0: 1475315139001.78, x1: 1475315139001.8},
          {count: 0, x0: 1475315139001.8, x1: 1475315139001.82},
          {count: 0, x0: 1475315139001.82, x1: 1475315139001.84},
          {count: 0, x0: 1475315139001.84, x1: 1475315139001.86},
          {count: 0, x0: 1475315139001.86, x1: 1475315139001.88},
          {count: 0, x0: 1475315139001.88, x1: 1475315139001.9},
          {count: 0, x0: 1475315139001.9, x1: 1475315139001.92},
          {count: 0, x0: 1475315139001.92, x1: 1475315139001.94},
          {count: 0, x0: 1475315139001.94, x1: 1475315139001.96},
          {count: 0, x0: 1475315139001.96, x1: 1475315139001.98},
          {count: 0, x0: 1475315139001.98, x1: 1475315139002},
          {count: 1, x0: 1475315139002, x1: 1475315139002.02},
          {count: 0, x0: 1475315139002.02, x1: 1475315139002.04},
          {count: 0, x0: 1475315139002.04, x1: 1475315139002.06},
          {count: 0, x0: 1475315139002.06, x1: 1475315139002.08},
          {count: 0, x0: 1475315139002.08, x1: 1475315139002.1},
          {count: 0, x0: 1475315139002.1, x1: 1475315139002.12},
          {count: 0, x0: 1475315139002.12, x1: 1475315139002.14},
          {count: 0, x0: 1475315139002.14, x1: 1475315139002.16},
          {count: 0, x0: 1475315139002.16, x1: 1475315139002.18},
          {count: 0, x0: 1475315139002.18, x1: 1475315139002.2},
          {count: 0, x0: 1475315139002.2, x1: 1475315139002.22},
          {count: 0, x0: 1475315139002.22, x1: 1475315139002.24},
          {count: 0, x0: 1475315139002.24, x1: 1475315139002.26},
          {count: 0, x0: 1475315139002.26, x1: 1475315139002.28},
          {count: 0, x0: 1475315139002.28, x1: 1475315139002.3},
          {count: 0, x0: 1475315139002.3, x1: 1475315139002.32},
          {count: 0, x0: 1475315139002.32, x1: 1475315139002.34},
          {count: 0, x0: 1475315139002.34, x1: 1475315139002.36},
          {count: 0, x0: 1475315139002.36, x1: 1475315139002.38},
          {count: 0, x0: 1475315139002.38, x1: 1475315139002.4},
          {count: 0, x0: 1475315139002.4, x1: 1475315139002.42},
          {count: 0, x0: 1475315139002.42, x1: 1475315139002.44},
          {count: 0, x0: 1475315139002.44, x1: 1475315139002.46},
          {count: 0, x0: 1475315139002.46, x1: 1475315139002.48},
          {count: 0, x0: 1475315139002.48, x1: 1475315139002.5},
          {count: 0, x0: 1475315139002.5, x1: 1475315139002.52},
          {count: 0, x0: 1475315139002.52, x1: 1475315139002.54},
          {count: 0, x0: 1475315139002.54, x1: 1475315139002.56},
          {count: 0, x0: 1475315139002.56, x1: 1475315139002.58},
          {count: 0, x0: 1475315139002.58, x1: 1475315139002.6},
          {count: 0, x0: 1475315139002.6, x1: 1475315139002.62},
          {count: 0, x0: 1475315139002.62, x1: 1475315139002.64},
          {count: 0, x0: 1475315139002.64, x1: 1475315139002.66},
          {count: 0, x0: 1475315139002.66, x1: 1475315139002.68},
          {count: 0, x0: 1475315139002.68, x1: 1475315139002.7},
          {count: 0, x0: 1475315139002.7, x1: 1475315139002.72},
          {count: 0, x0: 1475315139002.72, x1: 1475315139002.74},
          {count: 0, x0: 1475315139002.74, x1: 1475315139002.76},
          {count: 0, x0: 1475315139002.76, x1: 1475315139002.78},
          {count: 0, x0: 1475315139002.78, x1: 1475315139002.8},
          {count: 0, x0: 1475315139002.8, x1: 1475315139002.82},
          {count: 0, x0: 1475315139002.82, x1: 1475315139002.84},
          {count: 0, x0: 1475315139002.84, x1: 1475315139002.86},
          {count: 0, x0: 1475315139002.86, x1: 1475315139002.88},
          {count: 0, x0: 1475315139002.88, x1: 1475315139002.9},
          {count: 0, x0: 1475315139002.9, x1: 1475315139002.92},
          {count: 0, x0: 1475315139002.92, x1: 1475315139002.94},
          {count: 0, x0: 1475315139002.94, x1: 1475315139002.96},
          {count: 0, x0: 1475315139002.96, x1: 1475315139002.98},
          {count: 0, x0: 1475315139002.98, x1: 1475315139003},
          {count: 1, x0: 1475315139003, x1: 1475315139003}
        ],
        step: 0.1
      }
    },
    small: {
      input: [
        '2016-10-01 09:45:39.010',
        '2016-10-01 09:45:39.020',
        '2016-10-01 09:45:39.030'
      ],
      expect: {
        domain: [1475315139010, 1475315139030],
        mappedValue: [1475315139010, 1475315139020, 1475315139030],
        histogram: [
          {count: 1, x0: 1475315139010, x1: 1475315139010.5},
          {count: 0, x0: 1475315139010.5, x1: 1475315139011},
          {count: 0, x0: 1475315139011, x1: 1475315139011.5},
          {count: 0, x0: 1475315139011.5, x1: 1475315139012},
          {count: 0, x0: 1475315139012, x1: 1475315139012.5},
          {count: 0, x0: 1475315139012.5, x1: 1475315139013},
          {count: 0, x0: 1475315139013, x1: 1475315139013.5},
          {count: 0, x0: 1475315139013.5, x1: 1475315139014},
          {count: 0, x0: 1475315139014, x1: 1475315139014.5},
          {count: 0, x0: 1475315139014.5, x1: 1475315139015},
          {count: 0, x0: 1475315139015, x1: 1475315139015.5},
          {count: 0, x0: 1475315139015.5, x1: 1475315139016},
          {count: 0, x0: 1475315139016, x1: 1475315139016.5},
          {count: 0, x0: 1475315139016.5, x1: 1475315139017},
          {count: 0, x0: 1475315139017, x1: 1475315139017.5},
          {count: 0, x0: 1475315139017.5, x1: 1475315139018},
          {count: 0, x0: 1475315139018, x1: 1475315139018.5},
          {count: 0, x0: 1475315139018.5, x1: 1475315139019},
          {count: 0, x0: 1475315139019, x1: 1475315139019.5},
          {count: 0, x0: 1475315139019.5, x1: 1475315139020},
          {count: 1, x0: 1475315139020, x1: 1475315139020.5},
          {count: 0, x0: 1475315139020.5, x1: 1475315139021},
          {count: 0, x0: 1475315139021, x1: 1475315139021.5},
          {count: 0, x0: 1475315139021.5, x1: 1475315139022},
          {count: 0, x0: 1475315139022, x1: 1475315139022.5},
          {count: 0, x0: 1475315139022.5, x1: 1475315139023},
          {count: 0, x0: 1475315139023, x1: 1475315139023.5},
          {count: 0, x0: 1475315139023.5, x1: 1475315139024},
          {count: 0, x0: 1475315139024, x1: 1475315139024.5},
          {count: 0, x0: 1475315139024.5, x1: 1475315139025},
          {count: 0, x0: 1475315139025, x1: 1475315139025.5},
          {count: 0, x0: 1475315139025.5, x1: 1475315139026},
          {count: 0, x0: 1475315139026, x1: 1475315139026.5},
          {count: 0, x0: 1475315139026.5, x1: 1475315139027},
          {count: 0, x0: 1475315139027, x1: 1475315139027.5},
          {count: 0, x0: 1475315139027.5, x1: 1475315139028},
          {count: 0, x0: 1475315139028, x1: 1475315139028.5},
          {count: 0, x0: 1475315139028.5, x1: 1475315139029},
          {count: 0, x0: 1475315139029, x1: 1475315139029.5},
          {count: 0, x0: 1475315139029.5, x1: 1475315139030},
          {count: 1, x0: 1475315139030, x1: 1475315139030}
        ],
        enlargedHistogram: [
          {count: 1, x0: 1475315139010, x1: 1475315139010.2},
          {count: 0, x0: 1475315139010.2, x1: 1475315139010.4},
          {count: 0, x0: 1475315139010.4, x1: 1475315139010.6},
          {count: 0, x0: 1475315139010.6, x1: 1475315139010.8},
          {count: 0, x0: 1475315139010.8, x1: 1475315139011},
          {count: 0, x0: 1475315139011, x1: 1475315139011.2},
          {count: 0, x0: 1475315139011.2, x1: 1475315139011.4},
          {count: 0, x0: 1475315139011.4, x1: 1475315139011.6},
          {count: 0, x0: 1475315139011.6, x1: 1475315139011.8},
          {count: 0, x0: 1475315139011.8, x1: 1475315139012},
          {count: 0, x0: 1475315139012, x1: 1475315139012.2},
          {count: 0, x0: 1475315139012.2, x1: 1475315139012.4},
          {count: 0, x0: 1475315139012.4, x1: 1475315139012.6},
          {count: 0, x0: 1475315139012.6, x1: 1475315139012.8},
          {count: 0, x0: 1475315139012.8, x1: 1475315139013},
          {count: 0, x0: 1475315139013, x1: 1475315139013.2},
          {count: 0, x0: 1475315139013.2, x1: 1475315139013.4},
          {count: 0, x0: 1475315139013.4, x1: 1475315139013.6},
          {count: 0, x0: 1475315139013.6, x1: 1475315139013.8},
          {count: 0, x0: 1475315139013.8, x1: 1475315139014},
          {count: 0, x0: 1475315139014, x1: 1475315139014.2},
          {count: 0, x0: 1475315139014.2, x1: 1475315139014.4},
          {count: 0, x0: 1475315139014.4, x1: 1475315139014.6},
          {count: 0, x0: 1475315139014.6, x1: 1475315139014.8},
          {count: 0, x0: 1475315139014.8, x1: 1475315139015},
          {count: 0, x0: 1475315139015, x1: 1475315139015.2},
          {count: 0, x0: 1475315139015.2, x1: 1475315139015.4},
          {count: 0, x0: 1475315139015.4, x1: 1475315139015.6},
          {count: 0, x0: 1475315139015.6, x1: 1475315139015.8},
          {count: 0, x0: 1475315139015.8, x1: 1475315139016},
          {count: 0, x0: 1475315139016, x1: 1475315139016.2},
          {count: 0, x0: 1475315139016.2, x1: 1475315139016.4},
          {count: 0, x0: 1475315139016.4, x1: 1475315139016.6},
          {count: 0, x0: 1475315139016.6, x1: 1475315139016.8},
          {count: 0, x0: 1475315139016.8, x1: 1475315139017},
          {count: 0, x0: 1475315139017, x1: 1475315139017.2},
          {count: 0, x0: 1475315139017.2, x1: 1475315139017.4},
          {count: 0, x0: 1475315139017.4, x1: 1475315139017.6},
          {count: 0, x0: 1475315139017.6, x1: 1475315139017.8},
          {count: 0, x0: 1475315139017.8, x1: 1475315139018},
          {count: 0, x0: 1475315139018, x1: 1475315139018.2},
          {count: 0, x0: 1475315139018.2, x1: 1475315139018.4},
          {count: 0, x0: 1475315139018.4, x1: 1475315139018.6},
          {count: 0, x0: 1475315139018.6, x1: 1475315139018.8},
          {count: 0, x0: 1475315139018.8, x1: 1475315139019},
          {count: 0, x0: 1475315139019, x1: 1475315139019.2},
          {count: 0, x0: 1475315139019.2, x1: 1475315139019.4},
          {count: 0, x0: 1475315139019.4, x1: 1475315139019.6},
          {count: 0, x0: 1475315139019.6, x1: 1475315139019.8},
          {count: 0, x0: 1475315139019.8, x1: 1475315139020},
          {count: 1, x0: 1475315139020, x1: 1475315139020.2},
          {count: 0, x0: 1475315139020.2, x1: 1475315139020.4},
          {count: 0, x0: 1475315139020.4, x1: 1475315139020.6},
          {count: 0, x0: 1475315139020.6, x1: 1475315139020.8},
          {count: 0, x0: 1475315139020.8, x1: 1475315139021},
          {count: 0, x0: 1475315139021, x1: 1475315139021.2},
          {count: 0, x0: 1475315139021.2, x1: 1475315139021.4},
          {count: 0, x0: 1475315139021.4, x1: 1475315139021.6},
          {count: 0, x0: 1475315139021.6, x1: 1475315139021.8},
          {count: 0, x0: 1475315139021.8, x1: 1475315139022},
          {count: 0, x0: 1475315139022, x1: 1475315139022.2},
          {count: 0, x0: 1475315139022.2, x1: 1475315139022.4},
          {count: 0, x0: 1475315139022.4, x1: 1475315139022.6},
          {count: 0, x0: 1475315139022.6, x1: 1475315139022.8},
          {count: 0, x0: 1475315139022.8, x1: 1475315139023},
          {count: 0, x0: 1475315139023, x1: 1475315139023.2},
          {count: 0, x0: 1475315139023.2, x1: 1475315139023.4},
          {count: 0, x0: 1475315139023.4, x1: 1475315139023.6},
          {count: 0, x0: 1475315139023.6, x1: 1475315139023.8},
          {count: 0, x0: 1475315139023.8, x1: 1475315139024},
          {count: 0, x0: 1475315139024, x1: 1475315139024.2},
          {count: 0, x0: 1475315139024.2, x1: 1475315139024.4},
          {count: 0, x0: 1475315139024.4, x1: 1475315139024.6},
          {count: 0, x0: 1475315139024.6, x1: 1475315139024.8},
          {count: 0, x0: 1475315139024.8, x1: 1475315139025},
          {count: 0, x0: 1475315139025, x1: 1475315139025.2},
          {count: 0, x0: 1475315139025.2, x1: 1475315139025.4},
          {count: 0, x0: 1475315139025.4, x1: 1475315139025.6},
          {count: 0, x0: 1475315139025.6, x1: 1475315139025.8},
          {count: 0, x0: 1475315139025.8, x1: 1475315139026},
          {count: 0, x0: 1475315139026, x1: 1475315139026.2},
          {count: 0, x0: 1475315139026.2, x1: 1475315139026.4},
          {count: 0, x0: 1475315139026.4, x1: 1475315139026.6},
          {count: 0, x0: 1475315139026.6, x1: 1475315139026.8},
          {count: 0, x0: 1475315139026.8, x1: 1475315139027},
          {count: 0, x0: 1475315139027, x1: 1475315139027.2},
          {count: 0, x0: 1475315139027.2, x1: 1475315139027.4},
          {count: 0, x0: 1475315139027.4, x1: 1475315139027.6},
          {count: 0, x0: 1475315139027.6, x1: 1475315139027.8},
          {count: 0, x0: 1475315139027.8, x1: 1475315139028},
          {count: 0, x0: 1475315139028, x1: 1475315139028.2},
          {count: 0, x0: 1475315139028.2, x1: 1475315139028.4},
          {count: 0, x0: 1475315139028.4, x1: 1475315139028.6},
          {count: 0, x0: 1475315139028.6, x1: 1475315139028.8},
          {count: 0, x0: 1475315139028.8, x1: 1475315139029},
          {count: 0, x0: 1475315139029, x1: 1475315139029.2},
          {count: 0, x0: 1475315139029.2, x1: 1475315139029.4},
          {count: 0, x0: 1475315139029.4, x1: 1475315139029.6},
          {count: 0, x0: 1475315139029.6, x1: 1475315139029.8},
          {count: 0, x0: 1475315139029.8, x1: 1475315139030},
          {count: 1, x0: 1475315139030, x1: 1475315139030}
        ],
        step: 1
      }
    },
    medium: {
      input: [
        '2016-10-01 09:45:39.100',
        '2016-10-01 09:45:39.200',
        '2016-10-01 09:45:39.300'
      ],
      expect: {
        domain: [1475315139100, 1475315139300],
        mappedValue: [1475315139100, 1475315139200, 1475315139300],
        histogram: [
          {count: 1, x0: 1475315139100, x1: 1475315139105},
          {count: 0, x0: 1475315139105, x1: 1475315139110},
          {count: 0, x0: 1475315139110, x1: 1475315139115},
          {count: 0, x0: 1475315139115, x1: 1475315139120},
          {count: 0, x0: 1475315139120, x1: 1475315139125},
          {count: 0, x0: 1475315139125, x1: 1475315139130},
          {count: 0, x0: 1475315139130, x1: 1475315139135},
          {count: 0, x0: 1475315139135, x1: 1475315139140},
          {count: 0, x0: 1475315139140, x1: 1475315139145},
          {count: 0, x0: 1475315139145, x1: 1475315139150},
          {count: 0, x0: 1475315139150, x1: 1475315139155},
          {count: 0, x0: 1475315139155, x1: 1475315139160},
          {count: 0, x0: 1475315139160, x1: 1475315139165},
          {count: 0, x0: 1475315139165, x1: 1475315139170},
          {count: 0, x0: 1475315139170, x1: 1475315139175},
          {count: 0, x0: 1475315139175, x1: 1475315139180},
          {count: 0, x0: 1475315139180, x1: 1475315139185},
          {count: 0, x0: 1475315139185, x1: 1475315139190},
          {count: 0, x0: 1475315139190, x1: 1475315139195},
          {count: 0, x0: 1475315139195, x1: 1475315139200},
          {count: 1, x0: 1475315139200, x1: 1475315139205},
          {count: 0, x0: 1475315139205, x1: 1475315139210},
          {count: 0, x0: 1475315139210, x1: 1475315139215},
          {count: 0, x0: 1475315139215, x1: 1475315139220},
          {count: 0, x0: 1475315139220, x1: 1475315139225},
          {count: 0, x0: 1475315139225, x1: 1475315139230},
          {count: 0, x0: 1475315139230, x1: 1475315139235},
          {count: 0, x0: 1475315139235, x1: 1475315139240},
          {count: 0, x0: 1475315139240, x1: 1475315139245},
          {count: 0, x0: 1475315139245, x1: 1475315139250},
          {count: 0, x0: 1475315139250, x1: 1475315139255},
          {count: 0, x0: 1475315139255, x1: 1475315139260},
          {count: 0, x0: 1475315139260, x1: 1475315139265},
          {count: 0, x0: 1475315139265, x1: 1475315139270},
          {count: 0, x0: 1475315139270, x1: 1475315139275},
          {count: 0, x0: 1475315139275, x1: 1475315139280},
          {count: 0, x0: 1475315139280, x1: 1475315139285},
          {count: 0, x0: 1475315139285, x1: 1475315139290},
          {count: 0, x0: 1475315139290, x1: 1475315139295},
          {count: 0, x0: 1475315139295, x1: 1475315139300},
          {count: 1, x0: 1475315139300, x1: 1475315139300}
        ],
        enlargedHistogram: [
          {count: 1, x0: 1475315139100, x1: 1475315139102},
          {count: 0, x0: 1475315139102, x1: 1475315139104},
          {count: 0, x0: 1475315139104, x1: 1475315139106},
          {count: 0, x0: 1475315139106, x1: 1475315139108},
          {count: 0, x0: 1475315139108, x1: 1475315139110},
          {count: 0, x0: 1475315139110, x1: 1475315139112},
          {count: 0, x0: 1475315139112, x1: 1475315139114},
          {count: 0, x0: 1475315139114, x1: 1475315139116},
          {count: 0, x0: 1475315139116, x1: 1475315139118},
          {count: 0, x0: 1475315139118, x1: 1475315139120},
          {count: 0, x0: 1475315139120, x1: 1475315139122},
          {count: 0, x0: 1475315139122, x1: 1475315139124},
          {count: 0, x0: 1475315139124, x1: 1475315139126},
          {count: 0, x0: 1475315139126, x1: 1475315139128},
          {count: 0, x0: 1475315139128, x1: 1475315139130},
          {count: 0, x0: 1475315139130, x1: 1475315139132},
          {count: 0, x0: 1475315139132, x1: 1475315139134},
          {count: 0, x0: 1475315139134, x1: 1475315139136},
          {count: 0, x0: 1475315139136, x1: 1475315139138},
          {count: 0, x0: 1475315139138, x1: 1475315139140},
          {count: 0, x0: 1475315139140, x1: 1475315139142},
          {count: 0, x0: 1475315139142, x1: 1475315139144},
          {count: 0, x0: 1475315139144, x1: 1475315139146},
          {count: 0, x0: 1475315139146, x1: 1475315139148},
          {count: 0, x0: 1475315139148, x1: 1475315139150},
          {count: 0, x0: 1475315139150, x1: 1475315139152},
          {count: 0, x0: 1475315139152, x1: 1475315139154},
          {count: 0, x0: 1475315139154, x1: 1475315139156},
          {count: 0, x0: 1475315139156, x1: 1475315139158},
          {count: 0, x0: 1475315139158, x1: 1475315139160},
          {count: 0, x0: 1475315139160, x1: 1475315139162},
          {count: 0, x0: 1475315139162, x1: 1475315139164},
          {count: 0, x0: 1475315139164, x1: 1475315139166},
          {count: 0, x0: 1475315139166, x1: 1475315139168},
          {count: 0, x0: 1475315139168, x1: 1475315139170},
          {count: 0, x0: 1475315139170, x1: 1475315139172},
          {count: 0, x0: 1475315139172, x1: 1475315139174},
          {count: 0, x0: 1475315139174, x1: 1475315139176},
          {count: 0, x0: 1475315139176, x1: 1475315139178},
          {count: 0, x0: 1475315139178, x1: 1475315139180},
          {count: 0, x0: 1475315139180, x1: 1475315139182},
          {count: 0, x0: 1475315139182, x1: 1475315139184},
          {count: 0, x0: 1475315139184, x1: 1475315139186},
          {count: 0, x0: 1475315139186, x1: 1475315139188},
          {count: 0, x0: 1475315139188, x1: 1475315139190},
          {count: 0, x0: 1475315139190, x1: 1475315139192},
          {count: 0, x0: 1475315139192, x1: 1475315139194},
          {count: 0, x0: 1475315139194, x1: 1475315139196},
          {count: 0, x0: 1475315139196, x1: 1475315139198},
          {count: 0, x0: 1475315139198, x1: 1475315139200},
          {count: 1, x0: 1475315139200, x1: 1475315139202},
          {count: 0, x0: 1475315139202, x1: 1475315139204},
          {count: 0, x0: 1475315139204, x1: 1475315139206},
          {count: 0, x0: 1475315139206, x1: 1475315139208},
          {count: 0, x0: 1475315139208, x1: 1475315139210},
          {count: 0, x0: 1475315139210, x1: 1475315139212},
          {count: 0, x0: 1475315139212, x1: 1475315139214},
          {count: 0, x0: 1475315139214, x1: 1475315139216},
          {count: 0, x0: 1475315139216, x1: 1475315139218},
          {count: 0, x0: 1475315139218, x1: 1475315139220},
          {count: 0, x0: 1475315139220, x1: 1475315139222},
          {count: 0, x0: 1475315139222, x1: 1475315139224},
          {count: 0, x0: 1475315139224, x1: 1475315139226},
          {count: 0, x0: 1475315139226, x1: 1475315139228},
          {count: 0, x0: 1475315139228, x1: 1475315139230},
          {count: 0, x0: 1475315139230, x1: 1475315139232},
          {count: 0, x0: 1475315139232, x1: 1475315139234},
          {count: 0, x0: 1475315139234, x1: 1475315139236},
          {count: 0, x0: 1475315139236, x1: 1475315139238},
          {count: 0, x0: 1475315139238, x1: 1475315139240},
          {count: 0, x0: 1475315139240, x1: 1475315139242},
          {count: 0, x0: 1475315139242, x1: 1475315139244},
          {count: 0, x0: 1475315139244, x1: 1475315139246},
          {count: 0, x0: 1475315139246, x1: 1475315139248},
          {count: 0, x0: 1475315139248, x1: 1475315139250},
          {count: 0, x0: 1475315139250, x1: 1475315139252},
          {count: 0, x0: 1475315139252, x1: 1475315139254},
          {count: 0, x0: 1475315139254, x1: 1475315139256},
          {count: 0, x0: 1475315139256, x1: 1475315139258},
          {count: 0, x0: 1475315139258, x1: 1475315139260},
          {count: 0, x0: 1475315139260, x1: 1475315139262},
          {count: 0, x0: 1475315139262, x1: 1475315139264},
          {count: 0, x0: 1475315139264, x1: 1475315139266},
          {count: 0, x0: 1475315139266, x1: 1475315139268},
          {count: 0, x0: 1475315139268, x1: 1475315139270},
          {count: 0, x0: 1475315139270, x1: 1475315139272},
          {count: 0, x0: 1475315139272, x1: 1475315139274},
          {count: 0, x0: 1475315139274, x1: 1475315139276},
          {count: 0, x0: 1475315139276, x1: 1475315139278},
          {count: 0, x0: 1475315139278, x1: 1475315139280},
          {count: 0, x0: 1475315139280, x1: 1475315139282},
          {count: 0, x0: 1475315139282, x1: 1475315139284},
          {count: 0, x0: 1475315139284, x1: 1475315139286},
          {count: 0, x0: 1475315139286, x1: 1475315139288},
          {count: 0, x0: 1475315139288, x1: 1475315139290},
          {count: 0, x0: 1475315139290, x1: 1475315139292},
          {count: 0, x0: 1475315139292, x1: 1475315139294},
          {count: 0, x0: 1475315139294, x1: 1475315139296},
          {count: 0, x0: 1475315139296, x1: 1475315139298},
          {count: 0, x0: 1475315139298, x1: 1475315139300},
          {count: 1, x0: 1475315139300, x1: 1475315139300}
        ],
        step: 5
      }
    },
    large: {
      input: ['2016-10-01 09:45:39', '2016-10-01 09:45:45'],
      expect: {
        domain: [1475315139000, 1475315145000],
        mappedValue: [1475315139000, 1475315145000],
        histogram: [
          {count: 1, x0: 1475315139000, x1: 1475315139100},
          {count: 0, x0: 1475315139100, x1: 1475315139200},
          {count: 0, x0: 1475315139200, x1: 1475315139300},
          {count: 0, x0: 1475315139300, x1: 1475315139400},
          {count: 0, x0: 1475315139400, x1: 1475315139500},
          {count: 0, x0: 1475315139500, x1: 1475315139600},
          {count: 0, x0: 1475315139600, x1: 1475315139700},
          {count: 0, x0: 1475315139700, x1: 1475315139800},
          {count: 0, x0: 1475315139800, x1: 1475315139900},
          {count: 0, x0: 1475315139900, x1: 1475315140000},
          {count: 0, x0: 1475315140000, x1: 1475315140100},
          {count: 0, x0: 1475315140100, x1: 1475315140200},
          {count: 0, x0: 1475315140200, x1: 1475315140300},
          {count: 0, x0: 1475315140300, x1: 1475315140400},
          {count: 0, x0: 1475315140400, x1: 1475315140500},
          {count: 0, x0: 1475315140500, x1: 1475315140600},
          {count: 0, x0: 1475315140600, x1: 1475315140700},
          {count: 0, x0: 1475315140700, x1: 1475315140800},
          {count: 0, x0: 1475315140800, x1: 1475315140900},
          {count: 0, x0: 1475315140900, x1: 1475315141000},
          {count: 0, x0: 1475315141000, x1: 1475315141100},
          {count: 0, x0: 1475315141100, x1: 1475315141200},
          {count: 0, x0: 1475315141200, x1: 1475315141300},
          {count: 0, x0: 1475315141300, x1: 1475315141400},
          {count: 0, x0: 1475315141400, x1: 1475315141500},
          {count: 0, x0: 1475315141500, x1: 1475315141600},
          {count: 0, x0: 1475315141600, x1: 1475315141700},
          {count: 0, x0: 1475315141700, x1: 1475315141800},
          {count: 0, x0: 1475315141800, x1: 1475315141900},
          {count: 0, x0: 1475315141900, x1: 1475315142000},
          {count: 0, x0: 1475315142000, x1: 1475315142100},
          {count: 0, x0: 1475315142100, x1: 1475315142200},
          {count: 0, x0: 1475315142200, x1: 1475315142300},
          {count: 0, x0: 1475315142300, x1: 1475315142400},
          {count: 0, x0: 1475315142400, x1: 1475315142500},
          {count: 0, x0: 1475315142500, x1: 1475315142600},
          {count: 0, x0: 1475315142600, x1: 1475315142700},
          {count: 0, x0: 1475315142700, x1: 1475315142800},
          {count: 0, x0: 1475315142800, x1: 1475315142900},
          {count: 0, x0: 1475315142900, x1: 1475315143000},
          {count: 0, x0: 1475315143000, x1: 1475315143100},
          {count: 0, x0: 1475315143100, x1: 1475315143200},
          {count: 0, x0: 1475315143200, x1: 1475315143300},
          {count: 0, x0: 1475315143300, x1: 1475315143400},
          {count: 0, x0: 1475315143400, x1: 1475315143500},
          {count: 0, x0: 1475315143500, x1: 1475315143600},
          {count: 0, x0: 1475315143600, x1: 1475315143700},
          {count: 0, x0: 1475315143700, x1: 1475315143800},
          {count: 0, x0: 1475315143800, x1: 1475315143900},
          {count: 0, x0: 1475315143900, x1: 1475315144000},
          {count: 0, x0: 1475315144000, x1: 1475315144100},
          {count: 0, x0: 1475315144100, x1: 1475315144200},
          {count: 0, x0: 1475315144200, x1: 1475315144300},
          {count: 0, x0: 1475315144300, x1: 1475315144400},
          {count: 0, x0: 1475315144400, x1: 1475315144500},
          {count: 0, x0: 1475315144500, x1: 1475315144600},
          {count: 0, x0: 1475315144600, x1: 1475315144700},
          {count: 0, x0: 1475315144700, x1: 1475315144800},
          {count: 0, x0: 1475315144800, x1: 1475315144900},
          {count: 0, x0: 1475315144900, x1: 1475315145000},
          {count: 1, x0: 1475315145000, x1: 1475315145000}
        ],
        enlargedHistogram: [
          {count: 1, x0: 1475315139000, x1: 1475315139050},
          {count: 0, x0: 1475315139050, x1: 1475315139100},
          {count: 0, x0: 1475315139100, x1: 1475315139150},
          {count: 0, x0: 1475315139150, x1: 1475315139200},
          {count: 0, x0: 1475315139200, x1: 1475315139250},
          {count: 0, x0: 1475315139250, x1: 1475315139300},
          {count: 0, x0: 1475315139300, x1: 1475315139350},
          {count: 0, x0: 1475315139350, x1: 1475315139400},
          {count: 0, x0: 1475315139400, x1: 1475315139450},
          {count: 0, x0: 1475315139450, x1: 1475315139500},
          {count: 0, x0: 1475315139500, x1: 1475315139550},
          {count: 0, x0: 1475315139550, x1: 1475315139600},
          {count: 0, x0: 1475315139600, x1: 1475315139650},
          {count: 0, x0: 1475315139650, x1: 1475315139700},
          {count: 0, x0: 1475315139700, x1: 1475315139750},
          {count: 0, x0: 1475315139750, x1: 1475315139800},
          {count: 0, x0: 1475315139800, x1: 1475315139850},
          {count: 0, x0: 1475315139850, x1: 1475315139900},
          {count: 0, x0: 1475315139900, x1: 1475315139950},
          {count: 0, x0: 1475315139950, x1: 1475315140000},
          {count: 0, x0: 1475315140000, x1: 1475315140050},
          {count: 0, x0: 1475315140050, x1: 1475315140100},
          {count: 0, x0: 1475315140100, x1: 1475315140150},
          {count: 0, x0: 1475315140150, x1: 1475315140200},
          {count: 0, x0: 1475315140200, x1: 1475315140250},
          {count: 0, x0: 1475315140250, x1: 1475315140300},
          {count: 0, x0: 1475315140300, x1: 1475315140350},
          {count: 0, x0: 1475315140350, x1: 1475315140400},
          {count: 0, x0: 1475315140400, x1: 1475315140450},
          {count: 0, x0: 1475315140450, x1: 1475315140500},
          {count: 0, x0: 1475315140500, x1: 1475315140550},
          {count: 0, x0: 1475315140550, x1: 1475315140600},
          {count: 0, x0: 1475315140600, x1: 1475315140650},
          {count: 0, x0: 1475315140650, x1: 1475315140700},
          {count: 0, x0: 1475315140700, x1: 1475315140750},
          {count: 0, x0: 1475315140750, x1: 1475315140800},
          {count: 0, x0: 1475315140800, x1: 1475315140850},
          {count: 0, x0: 1475315140850, x1: 1475315140900},
          {count: 0, x0: 1475315140900, x1: 1475315140950},
          {count: 0, x0: 1475315140950, x1: 1475315141000},
          {count: 0, x0: 1475315141000, x1: 1475315141050},
          {count: 0, x0: 1475315141050, x1: 1475315141100},
          {count: 0, x0: 1475315141100, x1: 1475315141150},
          {count: 0, x0: 1475315141150, x1: 1475315141200},
          {count: 0, x0: 1475315141200, x1: 1475315141250},
          {count: 0, x0: 1475315141250, x1: 1475315141300},
          {count: 0, x0: 1475315141300, x1: 1475315141350},
          {count: 0, x0: 1475315141350, x1: 1475315141400},
          {count: 0, x0: 1475315141400, x1: 1475315141450},
          {count: 0, x0: 1475315141450, x1: 1475315141500},
          {count: 0, x0: 1475315141500, x1: 1475315141550},
          {count: 0, x0: 1475315141550, x1: 1475315141600},
          {count: 0, x0: 1475315141600, x1: 1475315141650},
          {count: 0, x0: 1475315141650, x1: 1475315141700},
          {count: 0, x0: 1475315141700, x1: 1475315141750},
          {count: 0, x0: 1475315141750, x1: 1475315141800},
          {count: 0, x0: 1475315141800, x1: 1475315141850},
          {count: 0, x0: 1475315141850, x1: 1475315141900},
          {count: 0, x0: 1475315141900, x1: 1475315141950},
          {count: 0, x0: 1475315141950, x1: 1475315142000},
          {count: 0, x0: 1475315142000, x1: 1475315142050},
          {count: 0, x0: 1475315142050, x1: 1475315142100},
          {count: 0, x0: 1475315142100, x1: 1475315142150},
          {count: 0, x0: 1475315142150, x1: 1475315142200},
          {count: 0, x0: 1475315142200, x1: 1475315142250},
          {count: 0, x0: 1475315142250, x1: 1475315142300},
          {count: 0, x0: 1475315142300, x1: 1475315142350},
          {count: 0, x0: 1475315142350, x1: 1475315142400},
          {count: 0, x0: 1475315142400, x1: 1475315142450},
          {count: 0, x0: 1475315142450, x1: 1475315142500},
          {count: 0, x0: 1475315142500, x1: 1475315142550},
          {count: 0, x0: 1475315142550, x1: 1475315142600},
          {count: 0, x0: 1475315142600, x1: 1475315142650},
          {count: 0, x0: 1475315142650, x1: 1475315142700},
          {count: 0, x0: 1475315142700, x1: 1475315142750},
          {count: 0, x0: 1475315142750, x1: 1475315142800},
          {count: 0, x0: 1475315142800, x1: 1475315142850},
          {count: 0, x0: 1475315142850, x1: 1475315142900},
          {count: 0, x0: 1475315142900, x1: 1475315142950},
          {count: 0, x0: 1475315142950, x1: 1475315143000},
          {count: 0, x0: 1475315143000, x1: 1475315143050},
          {count: 0, x0: 1475315143050, x1: 1475315143100},
          {count: 0, x0: 1475315143100, x1: 1475315143150},
          {count: 0, x0: 1475315143150, x1: 1475315143200},
          {count: 0, x0: 1475315143200, x1: 1475315143250},
          {count: 0, x0: 1475315143250, x1: 1475315143300},
          {count: 0, x0: 1475315143300, x1: 1475315143350},
          {count: 0, x0: 1475315143350, x1: 1475315143400},
          {count: 0, x0: 1475315143400, x1: 1475315143450},
          {count: 0, x0: 1475315143450, x1: 1475315143500},
          {count: 0, x0: 1475315143500, x1: 1475315143550},
          {count: 0, x0: 1475315143550, x1: 1475315143600},
          {count: 0, x0: 1475315143600, x1: 1475315143650},
          {count: 0, x0: 1475315143650, x1: 1475315143700},
          {count: 0, x0: 1475315143700, x1: 1475315143750},
          {count: 0, x0: 1475315143750, x1: 1475315143800},
          {count: 0, x0: 1475315143800, x1: 1475315143850},
          {count: 0, x0: 1475315143850, x1: 1475315143900},
          {count: 0, x0: 1475315143900, x1: 1475315143950},
          {count: 0, x0: 1475315143950, x1: 1475315144000},
          {count: 0, x0: 1475315144000, x1: 1475315144050},
          {count: 0, x0: 1475315144050, x1: 1475315144100},
          {count: 0, x0: 1475315144100, x1: 1475315144150},
          {count: 0, x0: 1475315144150, x1: 1475315144200},
          {count: 0, x0: 1475315144200, x1: 1475315144250},
          {count: 0, x0: 1475315144250, x1: 1475315144300},
          {count: 0, x0: 1475315144300, x1: 1475315144350},
          {count: 0, x0: 1475315144350, x1: 1475315144400},
          {count: 0, x0: 1475315144400, x1: 1475315144450},
          {count: 0, x0: 1475315144450, x1: 1475315144500},
          {count: 0, x0: 1475315144500, x1: 1475315144550},
          {count: 0, x0: 1475315144550, x1: 1475315144600},
          {count: 0, x0: 1475315144600, x1: 1475315144650},
          {count: 0, x0: 1475315144650, x1: 1475315144700},
          {count: 0, x0: 1475315144700, x1: 1475315144750},
          {count: 0, x0: 1475315144750, x1: 1475315144800},
          {count: 0, x0: 1475315144800, x1: 1475315144850},
          {count: 0, x0: 1475315144850, x1: 1475315144900},
          {count: 0, x0: 1475315144900, x1: 1475315144950},
          {count: 0, x0: 1475315144950, x1: 1475315145000},
          {count: 1, x0: 1475315145000, x1: 1475315145000}
        ],
        step: 1000
      }
    }
  };

  Object.keys(timeData).forEach(key => {
    t.deepEqual(
      getTimestampFieldDomain(timeData[key].input, valueAccessor),
      timeData[key].expect,
      `time domain with ${key} delta`
    );
  });

  t.end();
});
/* eslint-enable max-statements */
